<!doctype html>

<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title><%= page_title controller.controller_name, controller.action_name %></title>

  <%= favicon_link_tag('favicon.png', :type => 'image/png') %>
  <%= csrf_meta_tag %>

  <%= schema_ld_script_block %>

  <%= seek_stylesheet_tags %>
  <%= seek_javascript_tags %>

  <link href="#data" type="application/json" rel="exhibit-data" />

</head>

<body id="body">

<%= render :partial=>"layouts/navbar/navbar" %>

<div id="content">
  <div class="container-fluid">
    <% if current_user && !(current_user&.person&.member?) %>
      <%= alert_box('info', hide_button: true) do %>
        <p>
          Before you can upload <%= t('workflow').pluralize -%> you will need to join, or be assigned to a <%= t('project') -%>.
          If you selected a <%= t('project') -%> and <%= t('institution') %> when registering, an administrator will review and confirm your selection.
        </p>

        <p>
          If you did not select a <%= t('project') -%> when registering, or have not yet been assigned to a <%= t('project') -%>:
        </p>

        <ol>
          <li><%= link_to('Click here', projects_path) %> to browse the list of <%= t('project').pluralize %> and request to join one.</li>
          <li><%= link_to('Click here', new_programme_path) %> to create a <%= t('programme') %>, a space in which you can create and manage your own <%= t('project').pluralize -%>.</li>
        </ol>

        <p>
          <em>
            For detailed guidance on how to join a <%= t('project') -%>, <%= link_to('click here', 'https://github.com/workflowhub-eu/about/wiki/How-to-join-a-project', target: :_blank) %>.
          </em>
        </p>
      <% end %>
    <% end %>
    <% unless breadcrumbs.empty? %>
        <div class="breadcrumbs">
          <ol class="breadcrumb">
            <%= render_breadcrumbs :tag => 'li', :separator => ' ' %>
          </ol>
        </div>
    <% end %>

    <%# applying styling to error / notice messages -%>
    <% if flash[:error] %>
        <%= alert_box('danger', :id => 'error_flash', :class => 'fade in') do %>
            <%= flash[:error] %>
        <% end %>
    <% end %>
    <% if flash[:notice] %>
        <%= alert_box('success', :id => 'notice_flash', :class => 'fade in') do %>
            <%= flash[:notice] %>
        <% end %>
    <% end %>

    <%# main content part of every page -%>
    <%= yield :layout %>
  </div>
</div>

<%= render :partial=>"layouts/footer" %>
<%= debug(params) if Rails.env.development? %>

<%= render partial: 'layouts/piwik' if Seek::Config.piwik_analytics_enabled %>
<%= analytics_init if Seek::Config.google_analytics_enabled %>
</body>
</html>
